OUTPUT_ARCH( "riscv" )

ENTRY( start )

PHDRS
{
  ram_h PT_LOAD;
}

MEMORY
{
  ram  (wxai! r) : ORIGIN = {{ template_mem_start_addr }}, LENGTH = {{ template_mem_size_kb }}K
}

SECTIONS {
	. = {{ template_mem_start_addr }};
	.init :
	{
		KEEP (*(SORT_NONE(.init)))
	} >ram AT>ram :ram_h
	start : { *(start) } >ram AT>ram :ram_h
	.text : { *(.text*) } >ram AT>ram :ram_h
	.rodata : { *(.rodata*) } >ram AT>ram :ram_h
	.data : { *(.data* .bss*) } >ram AT>ram :ram_h
	.stack  : ALIGN(16) 
	{
		. = 512; /* TODO 512 bytes for stack size is not much */
		PROVIDE( _sp = . );
	}
}
